type LendingStrategy @entity {
  id: ID!
  createdAt: BigInt!
  name: String!
  symbol: String!
  poolAddress: Bytes!
  underlying: Bytes!
  allowedCollateralRoot: Bytes!
  strategyURI: String!
  norm: BigInt!
  vaults: [Vault!] @derivedFrom(field: "strategy")
  normUpdates: [NormalizationUpdate!] @derivedFrom(field: "strategy")
}

type Account @entity {
  id: ID!
  vaults: [Vault!] @derivedFrom(field: "owner")
}

type Vault @entity {
  id: ID!
  strategy: LendingStrategy!
  owner: Account!
  tokenId: BigInt!
  debt: BigInt!
  open: Boolean!
}

type NormalizationUpdate @entity {
  id: ID!
  timestamp: BigInt!
  strategy: LendingStrategy!
  newNorm: BigInt!
}
